var game={};!function(){var a,c;function o(n,t){var o=a[n][t],e=function(n,t){for(var o=n-1<0?0:n-1,e=t-1<0?0:t-1,r=n+2>=a.length?a.length:n+2,i=t+2>=a[n].length?a[n].length:t+2,l=0,c=o;c<r;c++)for(var u=e;u<i;u++)a[c][u]&&l++;a[n][t]&&l--;return l}(n,t);c[n][t]=o,c[n][t]=o?3==e||2==e:3==e}game={tick:function(){for(var n=0;n<a.length;n++)for(var t=0;t<a.length;t++)o(n,t);a=c},printBoard:function(){for(var n="",t=0;t<a.length;t++){for(var o=0;o<a[t].length;o++)n+=a[t][o]?"0":"_";n+="\n"}return n},initBoard:function(n,t,o){a=[],c=[];for(var e=0;e<n;e++){a.push([]),c.push([]);for(var r=0;r<t;r++)a[e].push(!1),c[e].push(!1)}for(var i=0;i<o.length;i++){var l=o[i];a[l.row][l.col]=!0}},setCell:function(n){return a[n.row][n.col]?a[n.row][n.col]=!1:a[n.row][n.col]=!0,a[n.row][n.col]},getCell:function(n,t){return a[n][t]},getBoard:function(){return a},Cell:function(n,t){this.row=n,this.col=t}}}();var ui={};!function(){var t,o,n,e,r,i,l,c=50;function u(){try{n=setTimeout(function(){r++,h(),game.tick(),m(),u()},1e3)}catch(n){alert(n.message)}}function a(){f(),clearTimeout(n),r=0,h(),game.initBoard(10,10,[])}function f(){t.width=t.width}function g(){clearTimeout(n)}function s(n,t){document.getElementById(n).onclick=t}function h(){var n="";n=60<=r?Math.floor(r/60)+":"+r%60:r<10?"0:0"+r:"0:"+r,document.getElementById(e).innerText=n}function v(n){var t=function(n,t){console.log("x: "+n+", y:"+t);var o=Math.floor(n/c),e=Math.floor(t/c);return new game.Cell(o,e)}(n.clientX-i,n.clientY-l);game.setCell(t);m()}function m(){f();for(var n=game.getBoard(),t=0;t<n.length;t++)for(var o=0;o<n[t].length;o++)n[t][o]&&d(new game.Cell(o,t))}function d(n){o.fillStyle="#002288",o.fillRect(n.col*c,n.row*c,c,c)}ui={init:function(n){t=document.getElementById(n),i=t.offsetLeft,l=t.offsetTop,console.log(i),console.log(l),t.onclick=v,o=t.getContext("2d"),r=0},setClear:function(n){s(n,a)},setPause:function(n){s(n,g)},setRun:function(n){s(n,u)},setClock:function(n){e=n}}}(),window.onload=function(){game.initBoard(10,10,[]),ui.init("canvas"),ui.setRun("run"),ui.setClear("clear"),ui.setPause("pause"),ui.setClock("time")};