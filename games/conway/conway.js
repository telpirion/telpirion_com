var game={},ui=(!function(){var a,c;game={tick:function(){for(var n,t,e,o,r=0;r<a.length;r++)for(var i=0;i<a.length;i++)t=i,o=e=void 0,e=a[n=r][t],o=function(n,t){for(var e=n-1<0?0:n-1,o=t-1<0?0:t-1,r=n+2>=a.length?a.length:n+2,i=t+2>=a[n].length?a[n].length:t+2,l=0,c=e;c<r;c++)for(var u=o;u<i;u++)a[c][u]&&l++;a[n][t]&&l--;return l}(n,t),(c[n][t]=e)?c[n][t]=3==o||2==o:c[n][t]=3==o;a=c},printBoard:function(){for(var n="",t=0;t<a.length;t++){for(var e=0;e<a[t].length;e++)n+=a[t][e]?"0":"_";n+="\n"}return n},initBoard:function(n,t,e){a=[],c=[];for(var o=0;o<n;o++){a.push([]),c.push([]);for(var r=0;r<t;r++)a[o].push(!1),c[o].push(!1)}for(var i=0;i<e.length;i++){var l=e[i];a[l.row][l.col]=!0}},setCell:function(n){return a[n.row][n.col]?a[n.row][n.col]=!1:a[n.row][n.col]=!0,a[n.row][n.col]},getCell:function(n,t){return a[n][t]},getBoard:function(){return a},Cell:function(n,t){this.row=n,this.col=t}}}(),{});!function(){var t,r,n,e,o,i,l,c=50;function u(){try{n=setTimeout(function(){o++,h(),game.tick(),d(),u()},1e3)}catch(n){alert(n.message)}}function a(){f(),clearTimeout(n),o=0,h(),game.initBoard(10,10,[])}function f(){t.width=t.width}function g(){clearTimeout(n)}function s(n,t){document.getElementById(n).onclick=t}function h(){var n="",n=60<=o?Math.floor(o/60)+":"+o%60:o<10?"0:0"+o:"0:"+o;document.getElementById(e).innerText=n}function m(n){n=function(n,t){console.log("x: "+n+", y:"+t);n=Math.floor(n/c),t=Math.floor(t/c);return new game.Cell(n,t)}(n.clientX-i,n.clientY-l);game.setCell(n);d()}function d(){f();for(var n,t=game.getBoard(),e=0;e<t.length;e++)for(var o=0;o<t[e].length;o++)t[e][o]&&(n=new game.Cell(o,e),r.fillStyle="#002288",r.fillRect(n.col*c,n.row*c,c,c))}ui={init:function(n){t=document.getElementById(n),i=t.offsetLeft,l=t.offsetTop,console.log(i),console.log(l),t.onclick=m,r=t.getContext("2d"),o=0},setClear:function(n){s(n,a)},setPause:function(n){s(n,g)},setRun:function(n){s(n,u)},setClock:function(n){e=n}}}(),window.onload=function(){game.initBoard(10,10,[]),ui.init("canvas"),ui.setRun("run"),ui.setClear("clear"),ui.setPause("pause"),ui.setClock("time")};